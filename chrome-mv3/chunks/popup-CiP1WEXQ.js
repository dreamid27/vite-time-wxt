import{c as I,r,j as e,S as p,R as z,a as M}from"./index-C9dOOFJZ.js";import{L as w,X as O,B as u,T as P,g as $,h as A,f as h,n as j,t as S}from"./theme-provider-DNz-Fz_9.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],N=I("settings",F);var y,B;const D=(B=(y=globalThis.browser)==null?void 0:y.runtime)!=null&&B.id?globalThis.browser:globalThis.chrome,v=D;function q(){const[l,T]=r.useState(null),[s,o]=r.useState(!1),[U,x]=r.useState(!0),[n,b]=r.useState(!1),[g,i]=r.useState(null);r.useEffect(()=>{(async()=>{var t;try{x(!0),i(null);const a=await new Promise(m=>{v.tabs.query({active:!0,currentWindow:!0},R=>{m(R)})});if(!((t=a[0])!=null&&t.url)){i("This page cannot be blocked.");return}const d=a[0].url;T(d);const E=new URL(d).hostname.replace("www.",""),L=(await h.blockedSites.toArray()).some(m=>j(m.url).includes(E));o(!!L)}catch(a){console.error("Error checking current site:",a),i("Failed to check current site. Please try again.")}finally{x(!1)}})()},[]);const C=async()=>{if(!(!l||s))try{b(!0);const t=new URL(l).hostname.replace("www.","");if((await h.blockedSites.toArray()).some(k=>j(k.url)===t)){o(!0);return}await h.blockedSites.add({id:crypto.randomUUID(),url:t,createdAt:new Date().toISOString()}),o(!0),S.success("Site blocked",{description:`${t} has been added to your blocked list.`}),setTimeout(()=>window.close(),1500)}catch(c){console.error("Error blocking site:",c),S.error("Error",{description:"Failed to block this site. Please try again."})}finally{b(!1)}},f=()=>{v.runtime.openOptionsPage()};return U?e.jsxs("div",{className:"flex flex-col items-center justify-center p-6 w-64 text-center",children:[e.jsx(w,{className:"h-6 w-6 animate-spin text-muted-foreground mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Checking site..."})]}):g?e.jsxs("div",{className:"flex flex-col p-4 w-64",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-destructive",children:[e.jsx(O,{className:"h-5 w-5"}),e.jsx("h2",{className:"font-medium",children:"Unable to block this page"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:g}),e.jsxs(u,{variant:"outline",size:"sm",onClick:f,children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Manage Blocked Sites"]})]}):e.jsx(P,{defaultTheme:"system",storageKey:"vite-ui-theme",children:e.jsxs("div",{className:"flex flex-col w-[360px] min-h-[220px] bg-background  overflow-hidden  transition-all duration-300 animate-in fade-in-50 slide-in-from-top-2",children:[e.jsx("div",{className:`px-6 pt-6 pb-4 transition-colors duration-300 ${s?"bg-green-50 dark:bg-green-900/20 border-b border-green-100 dark:border-green-900/30":"bg-blue-50 dark:bg-blue-900/10 border-b border-blue-100 dark:border-blue-900/30"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-2.5 rounded-xl transition-all duration-300 ${s?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400"}`,children:s?e.jsx($,{className:"h-6 w-6"}):e.jsx(p,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"font-semibold text-lg text-foreground mb-1",children:s?"Site is Blocked":"Block This Site?"}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:l?new URL(l).hostname:""})]})]})}),e.jsx("div",{className:"p-6 pt-5",children:e.jsxs("div",{className:"space-y-4",children:[!s&&e.jsx(u,{onClick:C,disabled:n,size:"lg",className:`w-full h-12 text-base font-medium transition-all duration-300 transform hover:scale-[1.02] ${n?"opacity-80":"hover:shadow-md"}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-5 w-5 animate-spin"}),"Blocking..."]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"mr-2 h-5 w-5"}),"Block This Site"]})}),e.jsxs(u,{variant:"outline",size:"sm",onClick:f,className:"w-full h-10 text-sm font-normal transition-colors hover:bg-accent/50",children:[e.jsx(N,{className:"h-4 w-4 mr-2 opacity-70"}),"Manage Blocked Sites"]})]})}),e.jsx(A,{position:"top-center"})]})})}z.createRoot(document.getElementById("root")).render(e.jsx(M.StrictMode,{children:e.jsx(q,{})}));
